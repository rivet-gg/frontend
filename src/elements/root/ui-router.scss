@use '../shared/common';
@use '../shared/consts';

$transition-duration: 250ms; // Also update in ui-router

#base {
	display: flex;
	flex-direction: column;

	.page {
		position: relative;
		left: 0;
		top: 0;
		width: 100%;
		min-height: 93vh;
	}
}

@media only screen and (max-width: consts.$mobile-width-threshold) {
	#base {
		.page {
			transform: translateX(100vw);
			box-shadow: 0 0 128px rgba(0, 0, 0, 0.8);

			.y-scroll {
				min-height: 93vh;
				background-color: $base-bg;
			}

			&.back {
				transform: translateX(-100vw);
			}

			// Home page has a lesser shadow
			&.home {
				box-shadow: 0 0 64px rgba(0, 0, 0, 0.6);
			}

			&.old {
				// Position and width have to be manually set because old pages are removed from normal flow
				position: absolute;
				left: 0;
				top: 0;
				width: calc(100vw - #{consts.$scrollbar-width});

				transform: translateX(-100vw);

				&.back {
					transform: translateX(100vw);
				}
			}

			&.new {
				transform: translateX(0vh);
			}
		}

		&.notouch {
			.page {
				&.old {
					box-shadow: none;
					transition: box-shadow $transition-duration, transform $transition-duration * 4;
					transition-timing-function: ease-out;

					&.back {
						transition: box-shadow $transition-duration, transform $transition-duration;
						transition-timing-function: ease-out;
					}
				}

				&.new {
					box-shadow: none;
					transition: box-shadow $transition-duration, transform $transition-duration;
					transition-timing-function: ease-out;
				}
			}
		}
	}
}
